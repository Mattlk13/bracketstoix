// ------------------------------------------------------------------------
// Copyright (c) 2018-2024 Alexandre Bento Freire. All rights reserved.
// ------------------------------------------------------------------------

"use strict";var q=Object.create;var N=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var Q=(c,u)=>{for(var f in u)N(c,f,{get:u[f],enumerable:!0})},j=(c,u,f,b)=>{if(u&&typeof u=="object"||typeof u=="function")for(let S of H(u))!K.call(c,S)&&S!==f&&N(c,S,{get:()=>u[S],enumerable:!(b=G(u,S))||b.enumerable});return c};var W=(c,u,f)=>(f=c!=null?q(V(c)):{},j(u||!c||!c.__esModule?N(f,"default",{value:c,enumerable:!0}):f,c)),J=c=>j(N({},"__esModule",{value:!0}),c);var it={};Q(it,{activate:()=>tt,deactivate:()=>et});module.exports=J(it);var Z=W(require("vscode"));var p=W(require("vscode")),t;(T=>{let c;(o=>(o[o.utInTransform=0]="utInTransform",o[o.utTransform=1]="utTransform",o[o.utLineUtility=2]="utLineUtility",o[o.utLinesUtility=3]="utLinesUtility",o[o.utImmutableLinesUtility=4]="utImmutableLinesUtility",o[o.utInsertAtStartUtility=5]="utInsertAtStartUtility",o[o.utInsertAtEndUtility=6]="utInsertAtEndUtility"))(c=T.TIXUtilityType||={});let u;(e=>(e[e.ForceAll=-1]="ForceAll",e[e.All=1]="All",e[e.Word=2]="Word",e[e.Sentence=3]="Sentence",e[e.Line=4]="Line",e[e.None=5]="None",e[e.__Func=6]="__Func",e[e.ForceLine=-4]="ForceLine"))(u=T.TIXSelPolicy||={});let f;(h=>(h[h.firstLine=0]="firstLine",h[h.middleLine=1]="middleLine",h[h.lastLine=2]="lastLine"))(f||={});function b(a,d,n){n!==0?a.intext+=`
`+d:a.intext=d}async function S(a,d,n){if(d.length){let h=d.length,r=[];for(let i=0;i<h;i++){let s=d[i];s.prompt&&(s.prompt=C(s.prompt));let o=s.items?await p.window.showQuickPick(s.items,{placeHolder:s.placeHolder}):await p.window.showInputBox(s);if(o===void 0)return;r.push(o)}m(a,n,{userinputs:r})}}T.utilityManagerWithUserInputs=S;function A(a,d){m(a,d,{userinputs:[]})}T.utilityManager=A;function m(a,d,n){n.changes=[],n.editor=p.window.activeTextEditor,n.doc=n.editor.document,n.selNr=0;let h=n.editor.selections,r=h.length===1&&h[0].isEmpty;for(let i of h){switch(n.sel=i,n.inlines=[],a.utilType){case 5:case 6:let s="";if(r)n.intext="",s=d(n),s&&n.changes.push({location:new p.Position(n.sel.start.line,n.sel.start.character),value:s});else{let g=n.sel.start.line,y=n.sel.end.line,v,E;for(let I=g;I<=y;I++){v=I===g?n.sel.start.character:0,E=I===y?n.sel.end.character:n.doc.lineAt(I).text.length;let X=new p.Position(I,v),_=new p.Position(I,E);n.intext=n.doc.getText(new p.Range(X,_))||"";let R=d(n);R&&n.changes.push({location:a.utilType===5?X:_,value:R}),n.selNr++}n.selNr--}break;case 4:case 3:case 2:let o=r?0:i.start.line,e=r?n.doc.lineCount-1:i.end.line;for(let g=o;g<=e;g++){let y=n.doc.lineAt(g).text;switch(a.utilType){case 4:case 3:n.inlines.push(y);break;case 2:n.intext=y;let v=d(n);y!==v&&n.changes.push({location:new p.Range(new p.Position(g,0),new p.Position(g,y.length)),value:v});break}}if(a.utilType===4)d(n);else if(a.utilType===3){let g=d(n),y=new p.Range(new p.Position(o,0),new p.Position(e,n.doc.lineAt(e).text.length));n.changes.push({location:y,value:g.join(`
`)})}break;case 0:case 1:let l;if(r)n.intext=n.doc.getText(),l=new p.Range(new p.Position(0,0),new p.Position(n.doc.lineCount,0));else{if(l=n.sel,i.isEmpty)break;if(b(n,n.doc.lineAt(i.start.line).text.substring(i.start.character),0),i.start.line!==i.end.line){for(let g=i.start.line+1;g<i.end.line;g++)b(n,n.doc.lineAt(g).text,1);b(n,n.doc.lineAt(i.end.line).text.substring(0,i.end.character),2)}else b(n,n.intext.substring(0,i.end.character-i.start.character),0)}let U;a.utilType===0?U=n.intext.replace(a.pat,a.repl):U=d(n),n.intext!==U&&n.changes.push({location:l,value:U});break}n.selNr++}n.changes.length&&n.editor.edit(i=>{for(let s of n.changes)i.replace(s.location,s.value)})}function M(a){return p.workspace.getConfiguration("vsctoix").get(a)}T.getConfig=M;function C(a){return p.l10n!==void 0?p.l10n.t(a):a}T._=C})(t||={});var L;(C=>{function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,T=>{let a=Math.random()*16|0;return(T==="x"?a:a&3|8).toString(16)})}C.uuidv4=c;function u(){let T=new Date().getTimezoneOffset()*6e4;return new Date(Date.now()-T).toISOString().substring(0,19).replace("T"," ")}C.getLocalISOTimeDate=u;function f(){return u().substring(0,10)}C.ISODate=f;function b(){return u()}C.ISOTimeDate=b;function S(T,a){let d=/([\\.()[\]*+^$])/g;return T.replace(a?d:/(\$\d)/g,"\\$1")}C.regnize=S;function A(T,a){switch(T){case"upper":return a.toUpperCase();case"lower":return a.toLowerCase();case"capitalize":return a[0].toUpperCase()+a.substring(1);case"length":return a.length.toString();case"regnize":return S(a,!0);case"isodate":return f();case"isotimedate":return b();case"uuid":return c()}return a}function m(T){return/\\(c|e)/.test(T)}C.hasDynamicValues=m;function M(T,a,d){return T.replace(/\\(n|t|(?:c|e)(?:\{(\w+)\}){0,1})/g,(n,h,r)=>{switch(h.substring(0,1)){case"n":return`
`;case"t":return"	";case"\\":return"\\";case"c":let i=a++;if(r){let s=r[0];if(s==="x"||s==="X"){i+=parseInt(r.substring(1),16);let o=Number(i).toString(16);o=s==="x"?o.toLowerCase():o.toUpperCase();let e=r.length-1;return o.length<e&&(o=Array(e-o.length+1).join("0")+o),o}else i+=parseInt(r)}return Number(i).toString();case"e":return A(r,d)}return n})}C.processExpression=M})(L||={});var x;(o=>{function c(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Word,pat:/\b(_*\w)/g,repl:(e,l)=>l.toUpperCase()})}o.capitalize=c;function u(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Word,pat:/\b(_*\w)/g,repl:(e,l)=>l.toLowerCase()})}o.camelCase=u;function f(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Word,pat:/\b(\w+)\b/g,repl:(e,l)=>l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().replace(/_/g,"-")})}o.dashCase=f;function b(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Word,pat:/\b([\w\- ]+)\b/g,repl:(e,l)=>{if(l==="")return"";let U=l.match(/^(_*)([^ ])(.* .*)$/);if(U!==null)return U[1]+U[2].toUpperCase()+U[3].toLowerCase().replace(/ +([a-z])/g,(I,X)=>X.toUpperCase());if(l.match(/^_*[A-Z].*_/)!==null)return l.toLowerCase();let g=l.match(/^(_*)([^_]+_.*)$/);if(g!==null)return g[1]+g[2].replace(/_/g,"-");let y=l.match(/^(_*)([^-].*-.*)$/);if(y!==null)return y[1]+y[2].replace(/-/g," ");let v=l.match(/^(_*)([A-Z])([^A-Z].*)$/);if(v!==null)return v[1]+v[2].toLowerCase()+v[3];let E=l.match(/^(_*)([^A-Z_]+[A-Z].*)$/);return E!==null?E[1]+E[2].replace(/([A-Z]+)/g,(I,X)=>"_"+X).toUpperCase():l}})}o.cycleCase=b;function S(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Word,pat:/([A-Z])/g,repl:(e,l)=>" "+l})}o.spaceByUpper=S;function A(){t.utilityManager({utilType:t.TIXUtilityType.utTransform,sp:t.TIXSelPolicy.Line},e=>encodeURIComponent(e.intext))}o.urlEncode=A;function m(){t.utilityManager({utilType:t.TIXUtilityType.utTransform,sp:t.TIXSelPolicy.Line},e=>decodeURIComponent(e.intext))}o.urlDecode=m;function M(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Sentence,pat:/(\${0,1})\b(.+)(\s+)([=<>]=*|[!:]=+)(\s+)([^;]+)/,repl:"$6$3$4$5$1$2"})}o.reverseAssignment=M;function C(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Line,pat:/\//g,repl:"\\"})}o.unixToWinSlash=C;function T(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Line,pat:/\\/g,repl:"/"})}o.winToUnixSlash=T;function a(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Line,pat:/\\/g,repl:"\\\\"})}o.singleToDoubleSlash=a;function d(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Line,pat:/\\\\/g,repl:"\\"})}o.doubleToSingleSlash=d;function n(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Line,pat:/-/g,repl:"_"})}o.dashToUnderscore=n;function h(){t.utilityManager({utilType:t.TIXUtilityType.utInTransform,sp:t.TIXSelPolicy.Line,pat:/_/g,repl:"-"})}o.underscoreToDash=h;function r(){t.utilityManager({utilType:t.TIXUtilityType.utTransform},e=>L.regnize(e.intext,!0))}o.regnize=r;function i(){t.utilityManager({utilType:t.TIXUtilityType.utTransform},e=>e.intext.trim().toLowerCase().replace(/[^\w\- \u0080-\uFFFFF]+/ug," ").replace(/\s+/g,"-").replace(/-+$/,""))}o.headerToBookmark=i;function s(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utTransform},[{prompt:"Start Section Line Pattern"},{prompt:"End Section Line Pattern"},{prompt:"Mixer"}],e=>{let l=e.userinputs[0],U=e.userinputs[1],g=e.userinputs[2];if(!l||!U||!g)return e.intext;let y=[],v=new RegExp(l),E=new RegExp(U),I,X=e.intext.split(/\n/),_=[],R;if(X.forEach((k,$)=>{I?E.test(k)?(y.push(I),I=void 0):I.push(k):v.test(k)?(I=[],R=R||$):_.push(k)}),y.length<2)return e.intext;let B=y[0].map((k,$)=>g.replace(/\$(\d+)/g,(nt,F)=>y[parseInt(F)][$]).replace(/\\n/g,`
`));return _.splice(R,0,B.join(`
`)),_.join(`
`)})}o.mixer=s})(x||={});var w;(h=>{function c(r){return r.inlines.map(s=>{let o=s.match(/(\d+)/);return[o?parseInt(o[0]):0,s]})}function u(){t.utilityManager({utilType:t.TIXUtilityType.utLinesUtility,sp:t.TIXSelPolicy.All},r=>{let i=r.inlines;for(let s=i.length-1;s>=0;s--)i[s+1]===i[s]&&i.splice(s+1,1);return i})}h.removeDuplicatedLines=u;function f(){t.utilityManager({utilType:t.TIXUtilityType.utLinesUtility,sp:t.TIXSelPolicy.All},r=>{let i=r.inlines;for(let s=i.length-1;s>=0;s--)i[s].trim()||i.splice(s,1);return i})}h.removeEmptyLines=f;function b(){t.utilityManager({utilType:t.TIXUtilityType.utLinesUtility,sp:t.TIXSelPolicy.All},r=>r.inlines.reverse())}h.reverseLines=b;function S(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utLinesUtility},[{prompt:"Expression"}],r=>{let i=r.userinputs[0];return L.hasDynamicValues(i)?(r.inlines.forEach((o,e)=>{r.inlines[e]+=L.processExpression(i,r.selNr+e,o)}),i=""):i=L.processExpression(i,r.selNr,r.intext),[r.inlines.join(i)]})}h.joinLines=S;function A(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utLinesUtility},[{prompt:"Expression"}],r=>{let i=L.processExpression(r.userinputs[0],r.selNr,r.intext),s=[];return r.inlines.forEach(o=>{s=s.concat(o.split(i))}),s})}h.splitLines=A;function m(){t.utilityManager({utilType:t.TIXUtilityType.utLinesUtility},r=>{let i=c(r);return i.sort((s,o)=>s[0]-o[0]),i.map(s=>s[1])})}h.sortNumericallyAscending=m;function M(){t.utilityManager({utilType:t.TIXUtilityType.utLinesUtility},r=>{let i=c(r);return i.sort((s,o)=>o[0]-s[0]),i.map(s=>s[1])})}h.sortNumericallyDescending=M;function C(){t.utilityManager({utilType:t.TIXUtilityType.utLineUtility,sp:t.TIXSelPolicy.All},r=>" "+r.intext)}h.indentOneSpace=C;function T(){t.utilityManager({utilType:t.TIXUtilityType.utLineUtility,sp:t.TIXSelPolicy.All},r=>r.intext!==""&&r.intext[0]===" "?r.intext.substring(1):r.intext)}h.outdentOneSpace=T;function a(r,i,s){let o=0,e,l;for(;o+i<r.length;){if(e=o+i,!s){for(l=r.substring(o,e).replace(/[\w_]/g,"0"),e-=o;e>0&&l[e-1]==="0";e--);!e&&l[0]==="0"&&(e=i),e+=o}r=r.substring(0,e)+`
`+r.substring(e),o=e+1}return r}function d(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utLinesUtility,sp:t.TIXSelPolicy.All},[{prompt:"Max number of Chars (add / at the end to allow word break)"}],r=>{let i=r.userinputs[0];if(!i)return r.inlines;let s=i[i.length-1]==="/",o=i.substring(0,i.length-(s?1:0)),e=parseInt(o);if(e===0)return r.inlines;let l=[];return r.inlines.forEach(U=>{l=l.concat(a(U,e,s))}),l})}h.breakLineAt=d;function n(){let i=t.getConfig("replaceRecipes").map((s,o)=>`${o+1}. ${s.name}`);t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utLinesUtility},[{prompt:"Type the recipe number or name",items:i}],s=>{if(s.userinputs[0]!=""){let e=t.getConfig("replaceRecipes")[parseInt(s.userinputs[0].replace(/^(\d+)\..*$/,"$1"),10)-1],l=e.isExpression!==!1,U=e.isRegExp!==!1?new RegExp(e.pattern,e.ignoreCase===!0?"i":void 0):e.pattern,g=e.replaceWith,y=[];return s.inlines.forEach((v,E)=>{let I=v.replace(U,g);y.push(l?L.processExpression(I,E,v):I)}),y}else return s.inlines})}h.replaceRecipes=n})(w||={});var D;(A=>{function c(){t.utilityManager({utilType:t.TIXUtilityType.utInsertAtEndUtility},m=>L.ISODate())}A.insertISODate=c;function u(){t.utilityManager({utilType:t.TIXUtilityType.utInsertAtEndUtility},m=>L.ISOTimeDate())}A.insertISOTimeDate=u;function f(){t.utilityManager({utilType:t.TIXUtilityType.utInsertAtEndUtility},m=>L.uuidv4())}A.insertUUID=f;function b(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utInsertAtEndUtility},[{prompt:"Expression"}],m=>L.processExpression(m.userinputs[0],m.selNr,m.intext))}A.insertTextAtEnd=b;function S(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utInsertAtStartUtility},[{prompt:"Expression"}],m=>L.processExpression(m.userinputs[0],m.selNr,m.intext))}A.insertTextAtStart=S})(D||={});var P=W(require("vscode")),O;(u=>{function c(){t.utilityManagerWithUserInputs({utilType:t.TIXUtilityType.utImmutableLinesUtility},[{prompt:"Pattern"}],f=>{let b=f.inlines.join(`
`),S=[];b.replace(new RegExp(f.userinputs[0],"g"),(A,...m)=>{let M=m.length-2,C=[];for(let T=0;T<M;T++)C.push(m[T]);return S.push(C.join("	")),A}),P.env.clipboard.writeText(S.join(`
`)).then(()=>{P.window.showInformationMessage(t._("Text copied to clipboard!"))})})}u.extractText=c})(O||={});var z=[{f:x.capitalize,id:"editor.capitalize"},{f:x.camelCase,id:"editor.camelCase"},{f:x.dashCase,id:"editor.dashCase"},{f:x.cycleCase,id:"editor.cycleCase"},{f:x.spaceByUpper,id:"editor.spaceByUpper"},{f:x.urlEncode,id:"editor.urlEncode"},{f:x.urlDecode,id:"editor.urlDecode"},{f:x.reverseAssignment,id:"editor.reverseAssignment"},{f:x.unixToWinSlash,id:"editor.unixToWinSlash"},{f:x.winToUnixSlash,id:"editor.winToUnixSlash"},{f:x.singleToDoubleSlash,id:"editor.singleToDoubleSlash"},{f:x.doubleToSingleSlash,id:"editor.doubleToSingleSlash"},{f:x.dashToUnderscore,id:"editor.dashToUnderscore"},{f:x.underscoreToDash,id:"editor.underscoreToDash"},{f:x.regnize,id:"editor.regnize"},{f:x.headerToBookmark,id:"editor.headerToBookmark"},{f:x.mixer,id:"editor.mixer"},{f:w.removeDuplicatedLines,id:"editor.removeDuplicatedLines"},{f:w.removeEmptyLines,id:"editor.removeEmptyLines"},{f:w.reverseLines,id:"editor.reverseLines"},{f:w.joinLines,id:"editor.joinLines"},{f:w.splitLines,id:"editor.splitLines"},{f:w.sortNumericallyAscending,id:"editor.sortNumericallyAscending"},{f:w.sortNumericallyDescending,id:"editor.sortNumericallyDescending"},{f:w.indentOneSpace,id:"editor.indentOneSpace"},{f:w.outdentOneSpace,id:"editor.outdentOneSpace"},{f:w.breakLineAt,id:"editor.breakLineAt"},{f:w.replaceRecipes,id:"editor.replaceRecipes"},{f:D.insertISODate,id:"editor.insertISODate"},{f:D.insertISOTimeDate,id:"editor.insertISOTimeDate"},{f:D.insertUUID,id:"editor.insertUUID"},{f:D.insertTextAtEnd,id:"editor.insertTextAtEnd"},{f:D.insertTextAtStart,id:"editor.insertTextAtStart"},{f:O.extractText,id:"editor.extractText"}];function tt(c){for(let u of z){let f=Z.commands.registerCommand(u.id,u.f);c.subscriptions.push(f)}}function et(){}0&&(module.exports={activate,deactivate});
